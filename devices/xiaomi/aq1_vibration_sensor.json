{
    "schema": "devcap1.schema.json",
    "doc:path": "xiaomi/aq_vibration_sensor.md",
    "doc:hdr": "Vibration sensor DJT11LM",
    "manufacturername": "$MF_LUMI",
    "modelid": "lumi.vibration.aq1",
    "product": "DJT11LM",
    "status": "Bronze",
    "md:known_issues": [ "xiaomi_known_issues1.md" ],
    "awake": [
        ["received/3", 1, "0x0000", "0xff01"]
    ],
    "subdevices": [
        {
            "type": "$TYPE_VIBRATION_SENSOR",
            "restapi": "/sensors",
            "uuid": [ "$address.ext", "0x01", "0x0101"],
            "fingerprint": { "profile": "0x0104", "device": "0x000a", "endpoint": "0x01", "in": ["0x0101"] },
            "items": [
                {
                    "name": "attr/lastseen"
                },
                {
                    "name": "attr/manufacturername"
                },
                {
                    "name": "attr/modelid"
                },
                {
                    "name": "attr/name"
                },
                {
                    "name": "attr/swversion"
                },
                {
                    "name": "attr/type"
                },
                {
                    "name": "attr/uniqueid"
                },
                {
                    "name": "config/on"
                },
                {
                    "name": "config/reachable"
                },
                {
                    "name": "config/pending"
                },
                {
                    "name": "config/battery",
                    "parse": {"fn": "parseXiaomiSpecial", "tag": "0x01", "idx": "0x02", "datatype": "0x21", "eval": "Item.val = Attr.val"},
                    "awake": true
                },
                {
                    "name": "config/temperature",
                    "parse": ["parseXiaomiSpecialAttribute/4", "0x03", "0x00", "0x28", "$raw"]
                },
                {
                    "name": "config/sensitivity",
                    "parse": {"fn": "zcl", "ep": 1, "cl": "0x0000", "at": "0xff0d", "eval": "Item.val == 0 ? Item.val = Attr.val : Item.val"},
                    "write": {"fn": "zcl", "ep": 1, "cl": "0x0000", "at": "0xff0d",  "dt": "0x20", "mf": "0x11F5", "eval": "Item.val"},
                    "values": [
                        ["low", 21], ["medium", 11], ["high", 1]
                    ]
                },
                {
                    "name": "config/sensitivitymax",
                    "default": 21
                },
                {
                    "name": "state/orientation"
                },
                {
                    "name": "state/orientation_x",
                    "parse": ["parseXiaomiVibration/0"]
                },
                {
                    "name": "state/orientation_y",
                    "parse": ["parseXiaomiVibration/0"]
                },
                {
                    "name": "state/orientation_z",
                    "parse": ["parseXiaomiVibration/0"]
                },
                {
                    "name": "state/tiltangle",
                    "parse": {"fn": "zcl", "ep": 1, "cl": "0x0101", "at": "0x0503", "eval": "Item.val = Attr.val"},
                    "default": 0
                },
                {
                    "name": "state/vibration",
                    "parse": {"fn": "zcl", "ep": 1, "cl": "0x0101", "at": "0x0055", "eval": "Item.val = Attr.val == 1"},
                    "default": false
                },
                {
                    "name": "state/vibrationstrength",
                    "parse": {"fn": "zcl", "ep": 1, "cl": "0x0101", "at": "0x0505", "eval": "Item.val = Attr.val >> 16"},
                    "default": 0
                },
                {
                    "name": "state/lastupdated"
                }
            ],
            "example": {
                "config": {
                    "battery": 95,
                    "on": true,
                    "pending": [],
                    "reachable": true,
                    "sensitivity": 1,
                    "sensitivitymax": 21,
                    "temperature": 2800
                },
                "lastseen": "2020-12-29T22:03Z",
                "manufacturername": "LUMI",
                "modelid": "lumi.vibration.aq1",
                "name": "Vibration Sensor",
                "state": {
                    "lastupdated": "2020-12-29T22:02:50.534",
                    "orientation": [
                        81, 1, 9
                    ],
                    "tiltangle": 84,
                    "vibration": false,
                    "vibrationstrength": 11
                },
                "swversion": "20180130",
                "type": "ZHAVibration",
                "uniqueid": "00:15:8d:00:02:af:95:f9-01-0101"
            }
        }
    ]
}